{"version":3,"file":"vue.js","sources":["../src/utils/index.js","../src/global-api/index.js","../src/observe/arr.js","../src/observe/dep.js","../src/observe/index.js","../src/initState.js","../src/compile/parseAst.js","../src/compile/generate.js","../src/compile/index.js","../src/vnode/patch.js","../src/observe/watcher.js","../src/lifecycle.js","../src/init.js","../src/vnode/index.js","../src/index.js"],"sourcesContent":["\r\nexport const HOOKS = [\r\n    \"beforecreate\",\r\n    \"created\",\r\n    \"beforeMount\",\r\n    \"mounted\",\r\n    \"beforeupdate\",\r\n    \"updated\",\r\n    \"beforeDestroy\",\r\n    \"destroyed\"\r\n]\r\n// 策略模式\r\nlet starts = {}\r\nstarts.data = function(parentVal,childVal){\r\n    return childVal\r\n\r\n}//合并data\r\nstarts.computed = function(){}\r\nstarts.watch = function(){}\r\nstarts.methods = function(){}\r\n// 遍历声明周期HOOKS\r\nHOOKS.forEach(hooks=>{\r\n    starts[hooks] = mergeHooks\r\n})\r\n\r\n// console.log(starts);\r\nfunction mergeHooks(parentVal,childVal){\r\n    // console.log(parentVal,childVal);\r\n    // {created:[a,b,c],data:[a,b]...}\r\n    if(childVal){\r\n        if(parentVal){\r\n            return parentVal.concat(childVal)\r\n        }else{\r\n            return [childVal] // \r\n        }\r\n    }else{\r\n        return parentVal\r\n    }\r\n}\r\n\r\nexport function mergeOptions(parent,child){\r\n    // console.log(parent,child);\r\n    const options = {}\r\n    // {created:[a,b,c],data:[a,b]...}\r\n    for(let key in parent){\r\n        mergeField(key)\r\n    }\r\n    for(let key in child){\r\n        mergeField(key)\r\n    }\r\n    function mergeField(key){\r\n        //  策略模式\r\n        if(starts[key]){\r\n            options[key] = starts[key](parent[key],child[key])\r\n        }else{\r\n            options[key] = child[key]\r\n        }\r\n    }\r\n    // console.log(options,'options');\r\n    return options\r\n}\r\n","import { mergeOptions } from \"../utils/index\"\r\n\r\nexport function initGlobApi(Vue){\r\n    // {created:[a,b,c],data:[a,b]...}\r\n    Vue.options = {}\r\n    Vue.Mixin = function(mixin){\r\n        // 对象的合并\r\n        // console.log(mixin);\r\n        // console.log(Vue.options,this.options);\r\n        this.options = mergeOptions(this.options,mixin)\r\n    }\r\n}\r\n","// 获取原来的数组方法\r\nlet oldArrayProtoMethods = Array.prototype\r\n// 继承 创建新的方法对象\r\nexport let arrMethods = Object.create(oldArrayProtoMethods)\r\n\r\nlet methods = ['push','pop',\"unshift\",\"shift\",\"splice\"]\r\n\r\nmethods.forEach(item=>{\r\n    arrMethods[item] = function(...args){\r\n        // console.log('劫持数组');\r\n       let result =  oldArrayProtoMethods[item].apply(this,args)//this当前实例对象，\r\n        //observe中把类整体赋值给了__ob__可供在此调用数据劫持方法obseveArray\r\n\r\n        //args :push时为添加的数组参数\r\n        // 追加的数组对象进行数据劫持 push unshift  splice(第三个参数时新增的)\r\n        let inserted;\r\n        switch(item){\r\n            case 'push':\r\n            case 'unshift':\r\n                inserted = args\r\n                break;\r\n            case 'splice':\r\n                inserted = args.splice(2)//arr.splice(0,1,{a:6})\r\n                break\r\n        }\r\n\r\n        // console.log(this,'this');//当前调用的数组对象\r\n        let ob = this.__ob__\r\n        if(inserted){\r\n            //对添加的对象进行劫持\r\n            ob.observeArray(inserted)\r\n        }\r\n        // console.log(inserted,111);\r\n        ob.dep.notify()\r\n       return result\r\n    }\r\n})","let id = 0\r\nclass Dep{\r\n    constructor(){\r\n        this.id = id ++\r\n        this.subs = []\r\n    }\r\n    // 收集 watcher\r\n    depend(){\r\n        // console.log(Dep.target);\r\n        // 希望watcher可以存放dep 双向记忆\r\n\r\n        // this.subs.push(Dep.target) //转至 watcher里 addDep添加\r\n        Dep.target.addDep(this) //dep实例添加至target=>watcher\r\n\r\n    }\r\n    addSub(watcher){\r\n        this.subs.push(watcher)\r\n    }\r\n    // 更新 watcher\r\n    notify(){\r\n        this.subs.forEach(watcher=>{\r\n            watcher.update()\r\n        })\r\n    }\r\n}\r\n// 添加watcher\r\nDep.target = null\r\nexport function pushTarget(watcher){\r\n    Dep.target = watcher\r\n}\r\nexport function popTarget(){\r\n    Dep.target = null\r\n}\r\nexport default Dep","import { arrMethods } from \"./arr\"\r\nimport Dep from './dep'\r\nexport function observer(data){\r\n    if(typeof data != 'object' || data == null){\r\n        return data\r\n    }\r\n    return new Observer(data)\r\n\r\n}\r\n\r\nclass Observer{\r\n    constructor(data){\r\n        // 定义一个属性\r\n        Object.defineProperty(data,'__ob__',{\r\n            enumerable:false,\r\n            value:this,//this当前实例 this.observeArray\r\n        })\r\n        this.dep = new Dep() //给所有的对象类型添加一个dep\r\n\r\n        if(Array.isArray(data)){\r\n           \r\n            // 对数组的方法进行劫持行操作\r\n            data.__proto__ = arrMethods\r\n            // 如果是对象数组，对数组对象劫持\r\n            this.observeArray(data)\r\n        }else{\r\n            this.walk(data) \r\n        }\r\n    }\r\n    // 遍历对象的属性，响应式劫持\r\n    walk(data){\r\n        let keys = Object.keys(data)\r\n        for(let i =0;i<keys.length;i++){\r\n            let key = keys[i]\r\n            let value = data[key]\r\n            defineReactive(data,key,value)\r\n        }\r\n    }\r\n    // 遍历对象数组\r\n    observeArray(value){\r\n        value.forEach(data=>{\r\n            observer(data)\r\n        })\r\n    }\r\n\r\n}\r\nfunction defineReactive(data,key,value){\r\n    let childDep = observer(value)\r\n    // 给每个属性添加一个dep\r\n    let dep = new Dep()\r\n    Object.defineProperty(data,key,{\r\n        get(){\r\n            // console.log(childDep,'childDep');\r\n            if(Dep.target){ \r\n            //注意此处是大写,target是静态私有变量不是实例的属性\r\n                dep.depend()\r\n                if(childDep.dep){\r\n                    // 如果有 进行数组收集\r\n                    childDep.dep.depend() \r\n                }\r\n            }\r\n            // console.log(dep,'dep111');\r\n            // console.log('获取pbj');\r\n            return value\r\n        },\r\n        set(newValue){\r\n            // console.log('设置obj');\r\n            if(newValue==value){\r\n                return\r\n            }\r\n            observer(newValue)\r\n            value = newValue\r\n            // 更新依赖\r\n            dep.notify()\r\n        }\r\n    })\r\n}\r\n","import { observer } from \"./observe/index\"\r\n\r\n\r\nexport function initState(vm){\r\n    let ops = vm.$options\r\n    if(ops.props){\r\n        initProps(vm)\r\n    }   \r\n    if(ops.data){\r\n        initData(vm)\r\n    }\r\n    if(ops.watch){\r\n        initWatch(vm)\r\n    }\r\n    if(ops.methods){\r\n        initMethods(vm)\r\n    }\r\n    if(ops.computed){\r\n        initComputed(vm)\r\n    }\r\n}\r\n// 初始化data\r\nfunction initData(vm){\r\n    let data = vm.$options.data\r\n    // data()  this默认window \r\n    data = vm._data = typeof data == 'function'?data.call(vm):data \r\n\r\n    //将对象上的所有属性，代理到实例上{a:1,b:@}  defineProperty\r\n    for(let key  in data){\r\n        Proxy(vm,'_data',key)    \r\n    }\r\n\r\n    observer(data)\r\n}\r\nfunction Proxy(vm,source,key){\r\n    Object.defineProperty(vm,key,{\r\n        get(){\r\n            return vm[source][key]\r\n        },\r\n        set(val){\r\n            vm[source][key] = val\r\n        }\r\n    })\r\n}\r\nfunction initProps(){}\r\nfunction initWatch(){}\r\nfunction initMethods(){}\r\nfunction initComputed(){}","\r\n\r\n// ast语法树 {} 操作节点 css js\r\n//  vnode {}操作节点\r\n// <div id=\"app\">hello {{msg}} </div>\r\n/* \r\n{\r\n    tag:\"div\",\r\n    attrs:[{id:\"app\"}],\r\n    children:[{\r\n        tag:null,\r\n        text:'hello{{msg}}'\r\n    }]\r\n}\r\n*/\r\n// 声明正则 匹配标签开头结尾 属性 \r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*` //标签名 a h span \r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})` //<span:xx> 特殊标签\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)//标签开头的正则，捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)//匹配标签结尾的</div>\r\n// attr='xxx'\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/ \r\nconst startTagClose = /^\\s*(\\/?)>/  //匹配标签结束时的>\r\n\r\n// 创建ast对象\r\nfunction createAstElement(tag,attrs){\r\n    return {\r\n        tag,//元素\r\n        attrs,//属性\r\n        children:[],//子集\r\n        type:1,//dom 1\r\n        parent:null\r\n    }\r\n}\r\n\r\nlet root;//根元素\r\nlet createdParent;//当前元素父节点\r\nlet stack=[]; //栈的数据解构 [div,h]\r\n\r\n\r\n// 开始的标签 添加至root 语法树解构的对象中\r\nfunction start(tag,attrs){\r\n    // console.log(tag,attrs,'开始标签');\r\n    let element = createAstElement(tag,attrs)\r\n    if(!root){\r\n        root = element\r\n    }\r\n    createdParent = element\r\n    stack.push(element)\r\n}\r\n// 文本\r\nfunction charts(text){\r\n    // console.log(text,'文本');\r\n    text = text.replace(/\\s*/g,'')//去空格\r\n    if(text){\r\n        createdParent.children.push({\r\n            type:3,\r\n            text\r\n        })\r\n    }\r\n}\r\nfunction end(tag){\r\n    // console.log(tag,'结束标签');\r\n    let element = stack.pop()\r\n    createdParent = stack[stack.length-1]\r\n    if(createdParent){ //元素的闭合\r\n        element.parent = createdParent.tag\r\n        createdParent.children.push(element)\r\n    }\r\n}\r\n\r\n\r\n\r\n// 解析html\r\n// 遍历\r\nexport function parseHTML(html){\r\n    // 开始标签 文本 结束标签\r\n    // 一层层的剥离html的内容\r\n    while(html){\r\n        let textEnd = html.indexOf('<')//有0 无-1\r\n        if(textEnd ===0){\r\n            // 1开始标签    \r\n            const startTagMatch = parseStartTag() //开始标签的内容\r\n            if(startTagMatch){\r\n                start(startTagMatch.tagName,startTagMatch.attrs)\r\n                continue\r\n            }\r\n            \r\n            // 2结束标签\r\n            let endTagMatch = html.match(endTag)\r\n            // console.log(endTagMatch,'endTagMatch');\r\n            if(endTagMatch){\r\n                advance(endTagMatch[0].length)\r\n                end(endTagMatch[1])\r\n                continue\r\n            }\r\n        }\r\n        let text \r\n        // 文本\r\n        if(textEnd>0){\r\n            // 获取文本内容\r\n            // console.log(html);\r\n            text = html.substring(0,textEnd)\r\n            // console.log(text);\r\n        }\r\n        if(text){\r\n            advance(text.length)\r\n            charts(text)\r\n            // console.log(html);\r\n        }\r\n        // break;\r\n    }\r\n    function parseStartTag(){\r\n        // 匹配开始标签\r\n        const start = html.match(startTagOpen)//1结果 2false\r\n        // console.log(start);\r\n        if(!start) return false\r\n        // 创建ast语法树\r\n        let match = {\r\n            tagName:start[1],\r\n            attrs:[],\r\n        }\r\n        // 删除开始标签\r\n        advance(start[0].length)\r\n        // 遍历属性,结束标签>\r\n        let attr,end \r\n        while(!(end = html.match(startTagClose) ) && (attr = html.match(attribute)) ){\r\n            // console.log(end);\r\n            // console.log(attr);\r\n            match.attrs.push({\r\n                name:attr[1],\r\n                value:attr[3]||attr[4]||attr[5]\r\n            })\r\n            advance(attr[0].length)\r\n        }\r\n        // console.log(end);\r\n        if(end){\r\n            advance(end[0].length)\r\n            return match\r\n        }\r\n    }\r\n    function advance(n){\r\n       html =  html.substring(n)\r\n        // console.log(html);\r\n    }\r\n    return root\r\n}\r\n  ","//   <div id='app'>hello{{msg}}<h></h></div>\r\n// render(){ //_c解析标签\r\n//     return _c('div',{id:app},_v('hello'+_s(msg)),_c('h',''))\r\n// }\r\n// 插值表达式\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n\r\n\r\nfunction genProps(attrs){\r\n    let str =''\r\n    for(let i = 0;i<attrs.length;i++){\r\n        let attr = attrs[i]\r\n        // 处理style属性\r\n        let obj = {}\r\n        if(attr.name=='style'){\r\n            attr.value.split(';').forEach(item=>{\r\n                let [key,val]=item.split(':')\r\n                obj[key] = val\r\n            })\r\n            attr.value = obj\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n    }\r\n     return `{${str.slice(0,-1)}}`\r\n}\r\n// 处理子节点\r\nfunction genChildren(el){\r\n    let children = el.children\r\n    // console.log(children);\r\n    if(children){\r\n        return children.map(child=>gen(child)).join(',')\r\n    }\r\n}\r\nfunction gen(node){\r\n    // 元素 _c\r\n    if(node.type === 1){\r\n        return generate(node)\r\n    }else{\r\n        //文本\r\n        // 1.纯文本 _v\r\n        // 2.插值表达式 _s\r\n        let text = node.text //获取文本\r\n        if(!defaultTagRE.test(text)){\r\n            // console.log(text);\r\n            // 普通文本\r\n            return `_v(${JSON.stringify(text)})`\r\n        }\r\n        // 特殊文本 带有插值表达式 {{}} \r\n        let tokens = []\r\n        let lastindex = defaultTagRE.lastIndex = 0 //正则调用多次的情况lastIndex匹配过后置位0可以再次使用 {{a}} {{b}}\r\n        let match \r\n        while (match = defaultTagRE.exec(text)) {\r\n            // console.log(match);\r\n            // hello {{msg}} dd\r\n            let index = match.index\r\n            if(index > lastindex){\r\n                // 添加内容\r\n                tokens.push(JSON.stringify(text.slice(lastindex,index)))\r\n            }\r\n            tokens.push(`_s(${match[1].trim()})`)\r\n            lastindex = index + match[0].length\r\n\r\n        }\r\n        if(lastindex<text.length){\r\n            tokens.push(JSON.stringify(text.slice(lastindex)))\r\n        }\r\n        // console.log({tokens});\r\n        return `_v(${tokens.join('+')})`\r\n    }\r\n}\r\nexport function generate(el){\r\n    // 处理子节点\r\n    let children = genChildren(el)\r\n    // console.log(children);\r\n    // 字符串模板\r\n    let code = `_c('${el.tag}',${el.attrs.length?`${genProps(el.attrs)}`:'undefined'}${children?`,${children}`:''})`\r\n    // console.log(code);\r\n    // _c('div',{id:\"app\",style:{\"color\":\"cyan\",\"margin\":\"10px\"}},_v(\"\\n        hello \"+_s(msg)+\" \\n        \"),_c('h2',undefined,_v(\"张三\")),_v(\"\\n    \"))\r\n    return code\r\n\r\n}","import {parseHTML} from './parseAst';\r\nimport {generate} from './generate';\r\nexport function compileToFunction(el){\r\n    // 1.将html变成ast语法树\r\n    let ast = parseHTML(el)\r\n\r\n    // 2.将ast语法树 变成render函数\r\n        // (1) ast语法树变成字符串拼接 (2) 字符串变成render函数 with()\r\n    \r\n    let code = generate(ast) // _c节点 _v文本 _s变量\r\n    // console.log(code);\r\n    let render = new Function(`with(this){return ${code}}`)\r\n    // console.log(render);\r\n\r\n    // ƒ anonymous(\r\n        //     ) {\r\n            //     with(this){return _c('div',{id:\"app\",style:{\"color\":\"cyan\",\"margin\":\"10px\"}},_v(\"\\n        hello \"+_s(msg)+\" \\n        \"),_c('h2',undefined,_v(\"张三\")),_v(\"\\n    \"))}\r\n    //     }\r\n    \r\n    // with的用法 改变作用域\r\n    // let obj = {a:1,b:2}\r\n    // with(obj){\r\n        //     console.log(a,b);\r\n        // }\r\n        \r\n    return render\r\n    // 3. 将render函数变成虚拟dom vnode init.js里实现\r\n\r\n\r\n}","// 将虚拟dom变成真实dom\r\nexport function patch(oldVnode,vnode){\r\n    // 1 创建真实的dom\r\n    // console.log(oldVnode,vnode);\r\n    let el = createEl(vnode)\r\n    // console.log(el);\r\n    // 2 替换 （1）获取父节点 （2） 插入当前节点 （3）老元素删除\r\n    let parentEl = oldVnode.parentNode\r\n    // console.log(parentEl);\r\n    parentEl.insertBefore(el,oldVnode.nextsibling)\r\n    parentEl.removeChild(oldVnode)\r\n    return el\r\n}\r\n\r\n// 创建真实dom\r\nfunction createEl(vnode){\r\n    let {tag,data,key,children,text} = vnode\r\n    if(typeof tag === 'string'){\r\n        // 标签\r\n        vnode.el = document.createElement(tag)\r\n        if(children.length){\r\n            children.forEach(child=>{\r\n                vnode.el.appendChild(createEl(child))\r\n            })\r\n        }\r\n        // for(let k in data){\r\n        //     if(k =='style'){\r\n        //         let styleStr=''\r\n        //         for(let l in data[k]){\r\n        //             styleStr += l \r\n        //             styleStr += ':'\r\n        //             styleStr += data[k][l]\r\n        //             styleStr += ';'\r\n        //         }\r\n        //         vnode.el.setAttribute(k,styleStr)\r\n\r\n        //     }else{\r\n        //         vnode.el.setAttribute(k,data[k])\r\n        //     }\r\n        // }\r\n        \r\n    }else{\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el\r\n}\r\n\r\n\r\n// vue的渲染流程\r\n// 数据初始化 => 对模板进行编译 => 变成render函数\r\n//  => 通过render函数变成vnode => vnode变成真实dom\r\n//  insert页面","import { popTarget, pushTarget } from \"./dep\"\r\n\r\n// 1 同过这个类 watcher实现更新\r\nlet id = 0\r\nclass watcher{\r\n    constructor(vm,updateComponent,cb,options){\r\n        // callback 标识\r\n        this.vm = vm\r\n        this.exprOrfn = updateComponent\r\n        this.cb =cb\r\n        this.options = options\r\n        this.id = id++\r\n        this.deps = [] //watcher存放dep \r\n        this.depsId = new Set() // 存放不重复的dep id\r\n        // 判断\r\n        if(typeof updateComponent === 'function'){\r\n            this.getters = updateComponent //更新视图\r\n        }\r\n        // 初次渲染\r\n        this.get()\r\n    }   \r\n    addDep(dep){\r\n        // 去重\r\n        let id = dep.id\r\n        //depsId set解构使用has方法判断是否存在\r\n        if(!this.depsId.has(id)){\r\n            this.deps.push(dep)\r\n            this.depsId.add(id)//set解构 用add方法添加\r\n            dep.addSub(this)\r\n        }\r\n\r\n    } \r\n    // 初次渲染\r\n    get(){\r\n        pushTarget(this) // 给dep添加watcher\r\n        this.getters() //渲染页面 vm._update(vm._render) _s(msg) 拿到vm.msg\r\n        popTarget() //取消watcher\r\n    }\r\n    // 更新数据\r\n    update(){\r\n        // 不要数据更新后每次调用\r\n        // 缓存\r\n        // this.get()\r\n        queueWatcher(this)\r\n    }\r\n    run(){\r\n        this.getters()\r\n    }\r\n}\r\nlet queue = []//将需要批量更新的watcher 存放队列中\r\nlet has = {}\r\nlet pending = false\r\nfunction queueWatcher(watcher){\r\n    let id = watcher.id // 没一个组件都是同一个watcher\r\n    // console.log(666); //3次\r\n    if(has[id] == null){ //去重\r\n        queue.push(watcher)\r\n        has[id] = true\r\n        //防抖: 触发多次 只执行一次\r\n        if(!pending){\r\n            //异步 等待同步代码执行完毕 执行\r\n            setTimeout(() => {\r\n                queue.forEach(item=>{\r\n                    watcher.run()\r\n                    queue =[]\r\n                    has = {}\r\n                    pending = true\r\n                })\r\n            }, 0);\r\n            pending = true\r\n        }\r\n    }\r\n}\r\nexport default watcher\r\n\r\n// vue更新策略:以组件为单位,给每一组件添加一个watcher,属性变化后,调用这个watcher\r\n\r\n// 收集依赖\r\n// vue  dep watcher data:{name,msg}\r\n// dep  : dep和data中的属性一一对应\r\n// watcher : 在视图上用几个,就有几个watcher\r\n// 一. 基本类型的关系\r\n// dep 与 watcher的关系:  一对多 dep.name = [w1,w2,w3...]\r\n\r\n\r\n//二. 实现对象的收集依赖\r\n// dep 和watcher的关系 多对多 computed \r\n// 三 数组更新\r\n// 1. 给所有的对象增加一个dep []\r\n// 2. 获取数组的值,会调用get方法,希望让当前的数组记住这个渲染的watcher\r\n//   (1) 需要获取当前dep\r\n//   (2) 当前面对数组取值的时候,就让数组的dep记住这个watcher\r\n// 3. 我们更新数组的时候,调用push,等等方法时,找到我们这个watcher","import { patch } from \"./vnode/patch\"\r\nimport watcher from './observe/watcher';\r\nexport function mountComponent(vm,el){\r\n\r\n    callHook(vm,'beforeMounted')\r\n\r\n    // 更新组件的方法\r\n    // 1.vm._render将render函数变成虚拟dom\r\n    // 2. vm._update 将vnode变成真实dom \r\n    \r\n    // 实现自动更新\r\n    let updateComponent = ()=>{\r\n        console.log(vm._render());\r\n        vm._update(vm._render())\r\n    }\r\n    // constructor(vm,updateComponent,cb,options){\r\n    new watcher(vm,updateComponent,()=>{},true)\r\n\r\n    callHook(vm,'mounted')\r\n}\r\nexport function lifecycleMixin(Vue){\r\n    Vue.prototype._update = function(vnode){\r\n        let vm = this\r\n        vm.$el = patch(vm.$el,vnode)//旧dom，虚拟dom\r\n    }\r\n} \r\n\r\n// 生命周期调用\r\nexport function callHook(vm,hook){\r\n    // console.log(vm);\r\n    const handlers = vm.$options[hook]\r\n    // [fn a,fn b,fn]\r\n    if(handlers){\r\n        for(let i =0;i<handlers.length;i++){\r\n            handlers[i].call(this)\r\n        }\r\n    }\r\n}","import { initState } from \"./initState\";\r\nimport {compileToFunction} from './compile/index'\r\nimport { callHook, mountComponent } from \"./lifecycle\";\r\nimport { mergeOptions } from \"./utils/index\";\r\nexport function initMixin(Vue){\r\n\r\n    Vue.prototype._init = function(options){\r\n        let vm = this\r\n        vm.$options = mergeOptions(Vue.options,options) \r\n        callHook(vm,'beforecreated')\r\n        // init 状态\r\n        initState(vm)\r\n        callHook(vm,'created')\r\n        \r\n        //渲染模板 el\r\n        if(vm.$options.el){\r\n            vm.$mounted(vm.$options.el)\r\n        }\r\n    }\r\n\r\n    // 创建$mounted\r\n    Vue.prototype.$mounted = function(el){\r\n        // console.log(el);\r\n        // el template render\r\n        let vm = this\r\n        let options = vm.$options\r\n        el = document.querySelector(el)\r\n        vm.$el = el // 真实dom\r\n        // 没有render函数\r\n        if(!options.render){\r\n            let template = options.template\r\n            // 没有template option \r\n            // 则 Compile el's outerHTML as template *\r\n            if(!template && el){\r\n                // 获取Html\r\n                el = el.outerHTML //html字符串\r\n                // <div id=\"app\">hello {{msg}} </div>\r\n                // 变成ast语法树 ,将ast语法树变成render函数\r\n                let render = compileToFunction(el)\r\n                // console.log(render);\r\n                // (1) 将render函数变成vnode\r\n                options.render = render\r\n                // (2) 将vnode变成真实DOM放到页面中\r\n            }\r\n            // 挂载组件\r\n            // 1.vm._render将render函数变成虚拟dom\r\n            // 2. vm._update 将vnode变成真实dom\r\n            mountComponent(vm,el)\r\n        }\r\n    }\r\n}\r\n","export function renderMixin(Vue){\r\n    // 节点 创建标签\r\n    Vue.prototype._c = function(){\r\n        return createElement(...arguments)\r\n    }\r\n    // 文本\r\n    Vue.prototype._v = function(text){\r\n        return createText(text)\r\n    }\r\n    // 变量 _s(msg)\r\n    Vue.prototype._s = function(val){\r\n        return val == null?\"\":(typeof val == \"Object\")?JSON.stringify(val):val\r\n    }\r\n    Vue.prototype._render = function(){\r\n        let vm = this\r\n        let render = vm.$options.render //init.js 中定义options的render属性为render函数\r\n        let vnode  = render.call(this)\r\n        return vnode\r\n    }\r\n}\r\n\r\n\r\n// 创建元素\r\nfunction createElement(tag,data={},...children){\r\n    return vnode(tag,data,data.key,children)\r\n}\r\n\r\n// 创建文本\r\nfunction createText(text){\r\n    return vnode(undefined,undefined,undefined,undefined,text)\r\n}\r\n// 创建虚拟dom\r\nfunction vnode(tag,data,key,children,text){\r\n    return {\r\n        tag,\r\n        data,\r\n        key,\r\n        children,\r\n        text\r\n    }\r\n}","import { initGlobApi } from \"./global-api/index\";\r\nimport { initMixin } from \"./init\";\r\nimport { lifecycleMixin } from \"./lifecycle\";\r\nimport { renderMixin } from \"./vnode/index.js\"\r\nfunction Vue(options){\r\n     this._init(options)\r\n    \r\n\r\n\r\n}\r\n\r\ninitMixin(Vue) // 添加数据初始化\r\nlifecycleMixin(Vue) //添加声明周期\r\nrenderMixin(Vue) //render函数 创建虚拟dom\r\n\r\n// 全局方法 Vuemixin vue.component extend...\r\ninitGlobApi(Vue)\r\n\r\n\r\nexport default Vue"],"names":["HOOKS","starts","data","parentVal","childVal","computed","watch","methods","forEach","hooks","mergeHooks","concat","mergeOptions","parent","child","options","key","mergeField","initGlobApi","Vue","Mixin","mixin","oldArrayProtoMethods","Array","prototype","arrMethods","Object","create","item","args","result","apply","inserted","splice","ob","__ob__","observeArray","dep","notify","id","Dep","subs","target","addDep","watcher","push","update","pushTarget","popTarget","observer","Observer","defineProperty","enumerable","value","isArray","__proto__","walk","keys","i","length","defineReactive","childDep","get","depend","set","newValue","initState","vm","ops","$options","props","initData","_data","call","Proxy","source","val","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","createAstElement","tag","attrs","children","type","root","createdParent","stack","start","element","charts","text","replace","end","pop","parseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","tagName","endTagMatch","match","advance","substring","attr","name","n","defaultTagRE","genProps","str","obj","split","JSON","stringify","slice","genChildren","el","map","gen","join","node","generate","test","tokens","lastindex","lastIndex","exec","index","trim","code","compileToFunction","ast","render","Function","patch","oldVnode","vnode","createEl","parentEl","parentNode","insertBefore","nextsibling","removeChild","document","createElement","appendChild","createTextNode","updateComponent","cb","exprOrfn","deps","depsId","Set","getters","has","add","addSub","queueWatcher","queue","pending","setTimeout","run","mountComponent","callHook","console","log","_render","_update","lifecycleMixin","$el","hook","handlers","initMixin","_init","$mounted","querySelector","template","outerHTML","renderMixin","_c","arguments","_v","createText","_s","undefined"],"mappings":"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"}